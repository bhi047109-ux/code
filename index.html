<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Encoder/Decoder Minimal with Lockdown (Preâ€‘alarm Voice)</title>
<style>
  :root{ --bg:#0b1220; --panel:#10192b; --fg:#eaf2ff; --muted:#99a8c2; --accent:#57d0ff; --danger:#ff4d6d; }
  html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#070c17);color:var(--fg);font-family:system-ui,Segoe UI,Roboto,Arial}
  .container{max-width:760px;margin:24px auto;padding:16px;border-radius:12px;background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.05)}
  h1{margin:0 0 12px;font-size:20px}
  label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
  select,input,textarea{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,.08);background:transparent;color:var(--fg)}
  textarea{min-height:120px}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  .btnbar{display:flex;gap:8px;margin-top:10px}
  .btn{padding:8px 12px;border:none;border-radius:8px;background:var(--accent);color:#03101b;font-weight:700;cursor:pointer}
  .ghost{background:transparent;border:1px solid rgba(255,255,255,.1);color:var(--fg)}
  .status{margin-top:10px;display:flex;gap:12px;font-size:12px;color:var(--muted)}
  pre{min-height:120px;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.08);padding:10px;border-radius:8px;white-space:pre-wrap}
  /* Lockdown overlay */
  .lockdown{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:radial-gradient(circle at 30% 20%, rgba(87,208,255,.08), rgba(0,0,0,.92));z-index:9999}
  .lockdown.active{display:flex}
  .lockcard{max-width:720px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);border-radius:12px;padding:20px;color:#fff;text-align:center}
  .siren{width:36px;height:36px;border-radius:50%;background:var(--danger);box-shadow:0 0 20px var(--danger)}
  .pulse{animation:pulse 800ms infinite}
  @keyframes pulse{0%{transform:scale(1);opacity:1}50%{transform:scale(1.35);opacity:.6}100%{transform:scale(1);opacity:1}}
</style>
</head>
<body>
  <!-- Lockdown overlay -->
  <div id="lockdown" class="lockdown" aria-hidden="true" role="alert">
    <div class="lockcard">
      <div style="display:flex;gap:10px;justify-content:center;align-items:center;margin-bottom:8px">
        <div id="sirenLight" class="siren"></div>
        <h2 id="lockTitle" style="margin:0">LOUD ALERT: LOCKDOWN IS STARTING!</h2>
      </div>
      <p id="lockMessage" style="margin:0 0 12px">Access denied until lockdown is lifted</p>
      <div style="display:flex;gap:8px;justify-content:center;align-items:center">
        <button id="refreshLock" class="btn ghost">Refresh</button>
        <label style="display:flex;gap:6px;align-items:center"><input id="sirenVol" type="range" min="0" max="1" step="0.05" value="0.8"> Volume</label>
      </div>
    </div>
  </div>

  <!-- App -->
  <div class="container" id="app">
    <h1>Encoder / Decoder</h1>

    <label>Channel</label>
    <select id="channelSelect"><option>alpha</option></select>

    <label style="margin-top:10px">Delimiter</label>
    <input id="delimiter" type="text" value=" " />

    <div class="row" style="margin-top:10px">
      <div>
        <label>Input</label>
        <textarea id="inputArea" placeholder="Type text to encode, or paste tokens to decode"></textarea>
        <div class="btnbar">
          <button id="encodeBtn" class="btn">Encode</button>
          <button id="decodeBtn" class="btn ghost">Decode</button>
        </div>
      </div>
      <div>
        <label>Output</label>
        <pre id="outputBox"></pre>
        <div class="btnbar">
          <button id="copyBtn" class="btn ghost">Copy</button>
          <button id="shakeBtn" class="btn ghost">Shake lockdown</button>
        </div>
      </div>
    </div>

    <div class="status">
      <div>Coverage: <span id="coverage">-</span></div>
      <div>Tokens/Len: <span id="tokens">-</span></div>
      <div>Speed: <span id="speed">-</span></div>
      <div>Entropy: <span id="entropy">-</span></div>
    </div>
  </div>

<script>
/* Helpers */
const $ = id => document.getElementById(id);
const now = () => performance.now();
function hexOfChar(ch){ const u=new TextEncoder().encode(ch); return Array.from(u).map(b=>b.toString(16).padStart(2,'0')).join(''); }
function charFromHex(hex){ const bytes=hex.match(/.{1,2}/g); if(!bytes) return ''; try{ return new TextDecoder().decode(new Uint8Array(bytes.map(h=>parseInt(h,16)))); } catch(e){ return '?'; } }
function entropy(s){ if(!s) return 0; const f={}; for(const c of s) f[c]=(f[c]||0)+1; let H=0; const L=s.length; for(const k in f){ const p=f[k]/L; H -= p*Math.log2(p);} return H; }

/* Single channel mapping */
const KEYMAP = {
  alpha: {
    "a":"231jdhe$","b":"b7X9","c":"c3Kq","d":"d8Lm","e":"e5Rt","f":"f2Vz","g":"g4Np","h":"h1Qw","i":"i6Yu","j":"j0Bs",
    "k":"k9Td","l":"l3Gh","m":"m8Pf","n":"n2Xa","o":"o7Re","p":"p4Uk","q":"q1Zm","r":"r6Vc","s":"s0Ln","t":"t5Bj",
    "u":"u3Hy","v":"v8Qp","w":"w2Ks","x":"x9Df","y":"y4Rt","z":"z1Ng",
    "A":"A23Jd","B":"B7xK","C":"C3qL","D":"D8mP","E":"E5tR","F":"F2zV","G":"G4pN","H":"H1wQ","I":"I6uY","J":"J0sB",
    "K":"K9dT","L":"L3hG","M":"M8fP","N":"N2aX","O":"O7eR","P":"P4kU","Q":"Q1mZ","R":"R
